[workspace]
resolver = "2"

members = [
    "lib/kels",
    "lib/kels-derive",
    "lib/kels-ffi",
    "services/kels",
    "services/kels-gossip",
    "services/kels-registry",
    "services/identity",
    "services/hsm",
    "clients/kels-bench",
    "clients/kels-cli",
]

# Shared dependencies across workspace for version consistency
[workspace.dependencies]
serde = { version = "1.0", features = ["derive"] }
serde_json = { version = "1.0", features = ["preserve_order"] }

# Workspace-wide clippy lints - deny panicky code patterns
[workspace.lints.clippy]
unwrap_used = "deny"
expect_used = "deny"
panic = "deny"
unwrap_in_result = "deny"

# Patch libp2p-identity to use our fork with external-signer support
[patch.crates-io]
libp2p-identity = { git = "https://github.com/jasoncolburne/rust-libp2p", branch = "external-signer" }
